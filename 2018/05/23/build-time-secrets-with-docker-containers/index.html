<!DOCTYPE html>
<html>
<head><meta name="generator" content="Hexo 3.9.0">
  <meta charset="utf-8">
  <meta name="google-site-verification" content="6jvcY_UrCpp1JLjXITf45ljboLU0NDGF16ZqomMt-ls">
  
  <title>Docker编译期间传递隐私数据 | 个人笔记</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="所谓的隐私数据，比如一些私有的token、密码、ssh key之类的不可公开但是编译期间却需要的信息 比如在docker编译期间，需要clone一个私有git仓库的代码，一般使用ssh key或者一个access token，这个密钥仅仅在编译期有用，并且不能暴露出去 几种常见思路 Dockerfile ENV variable Docker build time variables  留意bui">
<meta name="keywords" content="docker">
<meta property="og:type" content="article">
<meta property="og:title" content="Docker编译期间传递隐私数据">
<meta property="og:url" content="http://blog.kimq.cn/2018/05/23/build-time-secrets-with-docker-containers/index.html">
<meta property="og:site_name" content="个人笔记">
<meta property="og:description" content="所谓的隐私数据，比如一些私有的token、密码、ssh key之类的不可公开但是编译期间却需要的信息 比如在docker编译期间，需要clone一个私有git仓库的代码，一般使用ssh key或者一个access token，这个密钥仅仅在编译期有用，并且不能暴露出去 几种常见思路 Dockerfile ENV variable Docker build time variables  留意bui">
<meta property="og:locale" content="zh-CN">
<meta property="og:updated_time" content="2020-08-01T09:26:24.727Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Docker编译期间传递隐私数据">
<meta name="twitter:description" content="所谓的隐私数据，比如一些私有的token、密码、ssh key之类的不可公开但是编译期间却需要的信息 比如在docker编译期间，需要clone一个私有git仓库的代码，一般使用ssh key或者一个access token，这个密钥仅仅在编译期有用，并且不能暴露出去 几种常见思路 Dockerfile ENV variable Docker build time variables  留意bui">
  
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  

  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" integrity="sha384-1q8mTJOASx8j1Au+a5WDVnPi2lkFfwwEAa8hDDdjZlpLegxhjVME1fgjWPGmkzs7" crossorigin="anonymous">

  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css" integrity="sha384-XdYbMnZ/QjLh6iI4ogqCTaIjrFk87ip+ekIjefZch0Y+PvJ8CDYtEs1ipDmPorQ+" crossorigin="anonymous">

  <link rel="stylesheet" href="/css/styles.css">
  

</head>
</html>
<body>
  <nav class="navbar navbar-inverse">
  <div class="container">
    <!-- Brand and toggle get grouped for better mobile display -->
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#main-menu-navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      
    </div>

    <!-- Collect the nav links, forms, and other content for toggling -->
    <div class="collapse navbar-collapse" id="main-menu-navbar">
      <ul class="nav navbar-nav">
        
          <li><a class=""
                 href="/index.html">Home</a></li>
        
          <li><a class=""
                 href="/archives/">Archives</a></li>
        
          <li><a class=""
                 href="/atom.xml">Rss</a></li>
        
      </ul>

      <!--
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
      -->
    </div><!-- /.navbar-collapse -->
  </div><!-- /.container-fluid -->
</nav>

  <div class="container">
    <div class="blog-header">
  <h1 class="blog-title">个人笔记</h1>
  
    <p class="lead blog-description">专注互联网</p>
  
</div>

    <div class="row">
        <div class="col-sm-9 blog-main">
          <article id="post-build-time-secrets-with-docker-containers" class="article article-type-post" itemscope itemprop="blogPost">

  <header class="article-header">
    
  
    <h1 class="article-title" itemprop="name">
      Docker编译期间传递隐私数据
    </h1>
  


  </header>

  <div class="article-meta">
    <div class="article-datetime">
  <a href="/2018/05/23/build-time-secrets-with-docker-containers/" class="article-date"><time datetime="2018-05-23T11:34:09.000Z" itemprop="datePublished">2018-05-23</time></a>
</div>

    
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/环境搭建/">环境搭建</a>
  </div>


  </div>
  <div class="article-inner">

    <div class="article-entry" itemprop="articleBody">
      
        <p>所谓的隐私数据，比如一些私有的token、密码、ssh key之类的不可公开但是编译期间却需要的信息</p>
<p>比如在docker编译期间，需要clone一个私有git仓库的代码，一般使用ssh key或者一个access token，这个密钥仅仅在编译期有用，并且不能暴露出去</p>
<h1 id="几种常见思路"><a href="#几种常见思路" class="headerlink" title="几种常见思路"></a>几种常见思路</h1><ol>
<li>Dockerfile ENV variable</li>
<li>Docker build time variables</li>
</ol>
<p>留意<code>build-arg</code></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">docker build –build-arg HTTP_PROXY=http://10.20.30.2:1234 .</span><br></pre></td></tr></table></figure>
<p>这两种方式，实际都会在镜像中留下记录，也就是若获取到镜像，可以找到这些token，所以能达到目的，但并不安全</p>
<h1 id="dockito-vault"><a href="#dockito-vault" class="headerlink" title="dockito/vault"></a><a href="https://github.com/dockito/vault" target="_blank" rel="noopener">dockito/vault</a></h1><p><a href="https://github.com/dockito/vault" target="_blank" rel="noopener">dockito/vault</a>的思路很简单，在同一个docker环境下运行一个镜像，在里面运行一个http server。打包的docker镜像，则通过http协议去下载ssh key或者token，用完再删除。</p>
<p>这里的关键问题是<code>如何找到服务器的地址</code></p>
<p>考虑到默认配置下，同一个docker环境下的容器共享同一个ip内网，所以在目标容器中获取默认网关IP，同时<code>dockito/vault</code>绑定到这个IP即可实现</p>
<h2 id="测试"><a href="#测试" class="headerlink" title="测试"></a>测试</h2><p>先打一个基础镜像，避免每次测试都要去apt-get和curl</p>
<p>file:<code>dockerfile.base</code>,你可以使用其他镜像，比如<a href="https://alpinelinux.org/" target="_blank" rel="noopener">Alpine Linux</a><br><figure class="highlight dockerfile"><table><tr><td class="code"><pre><span class="line"><span class="keyword">FROM</span> ubuntu:<span class="number">14.04</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">RUN</span><span class="bash"> apt-get update &amp;&amp; apt-get install -y curl git &amp;&amp; \</span></span><br><span class="line"><span class="bash">        curl -L https://raw.githubusercontent.com/dockito/vault/master/ONVAULT &gt; /usr/bin/ONVAULT &amp;&amp; \</span></span><br><span class="line"><span class="bash">        chmod +x /usr/bin/ONVAULT</span></span><br></pre></td></tr></table></figure></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">docker build -t base:0.1 . -f Dockerfile.base</span><br></pre></td></tr></table></figure>
<h3 id="运行vault"><a href="#运行vault" class="headerlink" title="运行vault"></a>运行vault</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">king@king:~/$ docker run --rm -it  -p 172.17.0.1:14242:3000 -v ~/.ssh:/vault/.ssh dockito/vault</span><br><span class="line"></span><br><span class="line">&gt; dockito-vault@1.0.0 start /usr/src/app</span><br><span class="line">&gt; node index.js</span><br><span class="line"></span><br><span class="line">Service started on port 3000</span><br></pre></td></tr></table></figure>
<p>或者调试模式<br><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">king@king:~/$ docker run --rm -it  -p 172.17.0.1:14242:3000 -v ~/.ssh:/vault/.ssh dockito/vault /bin/sh</span><br><span class="line">/usr/src/app <span class="comment"># node index</span></span><br><span class="line">Service started on port 3000</span><br></pre></td></tr></table></figure></p>
<p>在宿主主机访问下面地址确认，参见<a href="https://github.com/dockito/vault/blob/master/index.js" target="_blank" rel="noopener">https://github.com/dockito/vault/blob/master/index.js</a></p>
<ol>
<li><a href="http://172.17.0.1:14242/_ping" target="_blank" rel="noopener">http://172.17.0.1:14242/_ping</a></li>
<li><a href="http://172.17.0.1:14242/ONVAULT" target="_blank" rel="noopener">http://172.17.0.1:14242/ONVAULT</a></li>
<li><a href="http://172.17.0.1:14242/ssh.tgz" target="_blank" rel="noopener">http://172.17.0.1:14242/ssh.tgz</a></li>
</ol>
<h3 id="目标镜像"><a href="#目标镜像" class="headerlink" title="目标镜像"></a>目标镜像</h3><figure class="highlight dockerfile"><table><tr><td class="code"><pre><span class="line"><span class="keyword">FROM</span> base:<span class="number">0.1</span></span><br><span class="line"><span class="keyword">RUN</span><span class="bash"> ONVAULT git <span class="built_in">clone</span> git@gitlab.kimq.cn:kingqiu/flask-swagger.git</span></span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">king@king:~/$ docker build -t b:0.1 .</span><br><span class="line">Sending build context to Docker daemon   131 MB</span><br><span class="line">Step 1/2 : FROM base:0.1</span><br><span class="line"> ---&gt; e8e50a0502d0</span><br><span class="line">Step 2/2 : RUN ONVAULT git <span class="built_in">clone</span> git@gitlab.kimq.cn:kingqiu/flask-swagger.git</span><br><span class="line"> ---&gt; Running <span class="keyword">in</span> 2747e4ef93b9</span><br><span class="line">[Dockito Vault] Downloading private keys...</span><br><span class="line">[Dockito Vault] Using ssh key: id_rsa</span><br><span class="line">[Dockito Vault] Executing <span class="built_in">command</span>: git <span class="built_in">clone</span> git@gitlab.kimq.cn:kingqiu/flask-swagger.git</span><br><span class="line">Cloning into <span class="string">'flask-swagger'</span>...</span><br><span class="line">[Dockito Vault] Removing private keys...</span><br><span class="line"> ---&gt; 3591a1e64c2d</span><br><span class="line">Removing intermediate container 2747e4ef93b9</span><br><span class="line">Successfully built 3591a1e64c2d</span><br></pre></td></tr></table></figure>
<p>具体怎么获取ssh key以及销毁，在脚本<a href="https://github.com/dockito/vault/blob/master/ONVAULT" target="_blank" rel="noopener">https://github.com/dockito/vault/blob/master/ONVAULT</a></p>
<h2 id="使用定制ssh-key"><a href="#使用定制ssh-key" class="headerlink" title="使用定制ssh key"></a>使用定制ssh key</h2><p>生成key，名称务必保持<code>id_rsa</code><br><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">(venv) king@king:~/$ ssh-keygen</span><br><span class="line">Generating public/private rsa key pair.</span><br><span class="line">Enter file <span class="keyword">in</span> <span class="built_in">which</span> to save the key (/home/king/.ssh/id_rsa):  id_rsa</span><br><span class="line">Enter passphrase (empty <span class="keyword">for</span> no passphrase):</span><br><span class="line">Enter same passphrase again:</span><br><span class="line">Your identification has been saved <span class="keyword">in</span> id_rsa.</span><br><span class="line">Your public key has been saved <span class="keyword">in</span> id_rsa.pub.</span><br><span class="line">The key fingerprint is:</span><br><span class="line">SHA256:fXnNp2bZXa9G7EhrjqsaZS/4W9XKgGB+YN5esolUWnQ king@king</span><br><span class="line">The key<span class="string">'s randomart image is:</span></span><br><span class="line"><span class="string">+---[RSA 2048]----+</span></span><br><span class="line"><span class="string">|        . E      |</span></span><br><span class="line"><span class="string">|       . .       |</span></span><br><span class="line"><span class="string">|      = o        |</span></span><br><span class="line"><span class="string">|     = B o   o o |</span></span><br><span class="line"><span class="string">|      = S + +.o =|</span></span><br><span class="line"><span class="string">|     . B * =.oo+=|</span></span><br><span class="line"><span class="string">|      + = o.o== +|</span></span><br><span class="line"><span class="string">|       o o .+oo. |</span></span><br><span class="line"><span class="string">|      ..+oo+...  |</span></span><br><span class="line"><span class="string">+----[SHA256]-----+</span></span><br></pre></td></tr></table></figure></p>
<p>新建<code>config</code>，确保和上面步骤的id_rsa同一目录，假如目录是<code>/home/king/tmp</code>，留意选项<code>StrictHostKeyChecking</code><br><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">Host *</span><br><span class="line">    StrictHostKeyChecking no</span><br></pre></td></tr></table></figure></p>
<p>运行server<br><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">docker run --rm -it -p 172.17.0.1:14242:3000 -v ~/tmp:/vault/.ssh dockito/vault</span><br></pre></td></tr></table></figure></p>
<p>将id_rsa.pub作为deploy key设置到gitlab/github上</p>
<p>然后重新build</p>
<h3 id="非id-rsa的key"><a href="#非id-rsa的key" class="headerlink" title="非id_rsa的key"></a>非<code>id_rsa</code>的key</h3><p>在脚本<a href="https://github.com/dockito/vault/blob/master/ONVAULT" target="_blank" rel="noopener">ONVAULT</a>，若设置了环境变量<code>VAULT_SSH_KEY</code>，会自动更新配置config<br><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="keyword">if</span> [[  <span class="string">"<span class="variable">$VAULT_SSH_KEY</span>"</span> != <span class="string">"id_rsa"</span> ]]; <span class="keyword">then</span></span><br><span class="line">	<span class="comment"># configure the ssh to any host to use this ssh key</span></span><br><span class="line">	<span class="built_in">echo</span> -e <span class="string">"\nHost *\nIdentityFile ~/.ssh/<span class="variable">$VAULT_SSH_KEY</span>"</span> &gt;&gt; ~/.ssh/config</span><br><span class="line"><span class="keyword">fi</span></span><br></pre></td></tr></table></figure></p>
<p>重命名</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">mv id_rsa gitlab &amp;&amp; mv id_rsa.pub gitlab.pub</span><br></pre></td></tr></table></figure>
<p>留意环境变量<code>VAULT_SSH_KEY</code></p>
<figure class="highlight dockerfile"><table><tr><td class="code"><pre><span class="line"><span class="keyword">FROM</span> base:<span class="number">0.1</span></span><br><span class="line"><span class="keyword">ENV</span> VAULT_SSH_KEY gitlab</span><br><span class="line"><span class="keyword">RUN</span><span class="bash"> ONVAULT git <span class="built_in">clone</span> git@gitlab.kimq.cn:kingqiu/flask-swagger.git</span></span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">king@king:~/$ ./b.sh </span><br><span class="line">Untagged: b:0.1</span><br><span class="line">Deleted: sha256:60987f8c94</span><br><span class="line">Sending build context to Docker daemon   131 MB</span><br><span class="line">Step 1/3 : FROM base:0.1</span><br><span class="line"> ---&gt; e8e50a0502d0</span><br><span class="line">Step 2/3 : ENV VAULT_SSH_KEY gitlab</span><br><span class="line"> ---&gt; Using cache</span><br><span class="line"> ---&gt; 8b92fa1adab3</span><br><span class="line">Step 3/3 : RUN ONVAULT git <span class="built_in">clone</span> git@gitlab.kimq.cn:kingqiu/flask-swagger.git</span><br><span class="line"> ---&gt; Running <span class="keyword">in</span> 43e70f25b64e</span><br><span class="line">[Dockito Vault] Downloading private keys...</span><br><span class="line">[Dockito Vault] Using ssh key: gitlab</span><br><span class="line">[Dockito Vault] Executing <span class="built_in">command</span>: git <span class="built_in">clone</span> git@gitlab.kimq.cn:kingqiu/flask-swagger.git</span><br><span class="line">Cloning into <span class="string">'flask-swagger'</span>...</span><br><span class="line">Warning: Permanently added <span class="string">'gitlab.kimq.cn,139.224.170.165'</span> (ECDSA) to the list of known hosts.</span><br><span class="line">[Dockito Vault] Removing private keys...</span><br><span class="line"> ---&gt; 1400a685ef0a</span><br><span class="line">Removing intermediate container 43e70f25b64e</span><br><span class="line">Successfully built 1400a685ef0a</span><br></pre></td></tr></table></figure>
<h1 id="问题"><a href="#问题" class="headerlink" title="问题"></a>问题</h1><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">[Dockito Vault] Executing <span class="built_in">command</span>: git <span class="built_in">clone</span> git@gitlab.kimq.cn:kingqiu/flask-swagger.git</span><br><span class="line">Cloning into <span class="string">'flask-swagger'</span>...</span><br><span class="line">fatal: cannot run ssh: No such file or directory</span><br><span class="line">fatal: unable to fork</span><br></pre></td></tr></table></figure>
<blockquote>
<p>apk add –update –virtual openssh-client</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">Collecting git+ssh://git@gitlab.kimq.cn/kingqiu/flask-swagger.git (from -r requirements.txt (line 57))</span><br><span class="line">  Cloning ssh://git@gitlab.kimq.cn/kingqiu/flask-swagger.git to /tmp/pip-o1noeq66-build</span><br><span class="line">Bad owner or permissions on /root/.ssh/config</span><br><span class="line">fatal: Could not <span class="built_in">read</span> from remote repository.</span><br></pre></td></tr></table></figure>
<blockquote>
<p>chmod 0600 config &amp;&amp; chown <code>whoami</code>:<code>id -g -n</code> config</p>
</blockquote>
<h1 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h1><ol>
<li><a href="https://elasticcompute.io/2016/01/22/build-time-secrets-with-docker-containers/" target="_blank" rel="noopener">https://elasticcompute.io/2016/01/22/build-time-secrets-with-docker-containers/</a></li>
<li><a href="https://github.com/dockito/vault" target="_blank" rel="noopener">https://github.com/dockito/vault</a></li>
<li><a href="https://github.com/mdsol/docker-ssh-exec" target="_blank" rel="noopener">https://github.com/mdsol/docker-ssh-exec</a></li>
</ol>

      
    </div>

    
      

    

    <footer class="article-footer">
      <a data-url="http://blog.kimq.cn/2018/05/23/build-time-secrets-with-docker-containers/" data-id="ckdbgbyv8000843poq9mxxgmz" class="article-share-link">
        <i class="fa fa-share"></i> Share
      </a>
      
        <a href="http://blog.kimq.cn/2018/05/23/build-time-secrets-with-docker-containers/#disqus_thread" class="article-comment-link">
          <i class="fa fa-comment"></i> Comments
        </a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/docker/">docker</a></li></ul>


    </footer>
  </div>
  
    
<ul id="article-nav" class="nav nav-pills nav-justified">
  
  <li role="presentation">
    <a href="/2017/12/06/ssh-tunnel/" id="article-nav-older" class="article-nav-link-wrap">
      <i class="fa fa-chevron-left pull-left"></i>
      <span class="article-nav-link-title">SSH隧道</span>
    </a>
  </li>
  
  
  <li role="presentation">
    <a href="/2018/05/25/plantuml/" id="article-nav-newer" class="article-nav-link-wrap">
      <span class="article-nav-link-title">使用plantuml画UML图</span>
      <i class="fa fa-chevron-right pull-right"></i>
    </a>
  </li>
  
</ul>


  
</article>


<section id="comments">
  <div id="disqus_thread">
    <noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
  </div>
</section>



        </div>
        <div class="col-sm-2 col-sm-offset-1 blog-sidebar">
          
  
  <div class="sidebar-module">
    <h4>Categories</h4>
    <ul class="sidebar-module-list"><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/categories/Golang/">Golang</a><span class="sidebar-module-list-count">14</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/categories/Openldap/">Openldap</a><span class="sidebar-module-list-count">3</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/categories/Python/">Python</a><span class="sidebar-module-list-count">1</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/categories/后端/">后端</a><span class="sidebar-module-list-count">11</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/categories/学习笔记/">学习笔记</a><span class="sidebar-module-list-count">5</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/categories/开发环境/">开发环境</a><span class="sidebar-module-list-count">13</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/categories/源码学习/">源码学习</a><span class="sidebar-module-list-count">9</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/categories/环境搭建/">环境搭建</a><span class="sidebar-module-list-count">1</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/categories/运营运维/">运营运维</a><span class="sidebar-module-list-count">10</span><ul class="sidebar-module-list-child"><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/categories/运营运维/代理/">代理</a><span class="sidebar-module-list-count">4</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/categories/运营运维/网站/">网站</a><span class="sidebar-module-list-count">1</span></li></ul></li></ul>
  </div>



  
  <div class="sidebar-module">
    <h4>Tags</h4>
    <ul class="sidebar-module-list"><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/ansible/">ansible</a><span class="sidebar-module-list-count">1</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/antd/">antd</a><span class="sidebar-module-list-count">1</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/cookie/">cookie</a><span class="sidebar-module-list-count">2</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/cors/">cors</a><span class="sidebar-module-list-count">1</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/crsf/">crsf</a><span class="sidebar-module-list-count">1</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/docker/">docker</a><span class="sidebar-module-list-count">3</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/drone/">drone</a><span class="sidebar-module-list-count">5</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/elasticsearch/">elasticsearch</a><span class="sidebar-module-list-count">1</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/flask/">flask</a><span class="sidebar-module-list-count">2</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/git/">git</a><span class="sidebar-module-list-count">2</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/github/">github</a><span class="sidebar-module-list-count">1</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/gitlab/">gitlab</a><span class="sidebar-module-list-count">2</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/golang/">golang</a><span class="sidebar-module-list-count">27</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/gorm/">gorm</a><span class="sidebar-module-list-count">1</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/grpc/">grpc</a><span class="sidebar-module-list-count">1</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/hexo/">hexo</a><span class="sidebar-module-list-count">1</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/influxdb/">influxdb</a><span class="sidebar-module-list-count">1</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/jsonp/">jsonp</a><span class="sidebar-module-list-count">1</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/jsonschema/">jsonschema</a><span class="sidebar-module-list-count">1</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/kibana/">kibana</a><span class="sidebar-module-list-count">1</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/martini/">martini</a><span class="sidebar-module-list-count">1</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/nginx/">nginx</a><span class="sidebar-module-list-count">4</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/ngrok/">ngrok</a><span class="sidebar-module-list-count">2</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/node/">node</a><span class="sidebar-module-list-count">1</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/openldap/">openldap</a><span class="sidebar-module-list-count">3</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/pip/">pip</a><span class="sidebar-module-list-count">1</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/proxy/">proxy</a><span class="sidebar-module-list-count">3</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/python/">python</a><span class="sidebar-module-list-count">2</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/redis/">redis</a><span class="sidebar-module-list-count">1</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/sentry/">sentry</a><span class="sidebar-module-list-count">2</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/sqlalchemy/">sqlalchemy</a><span class="sidebar-module-list-count">1</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/ssh/">ssh</a><span class="sidebar-module-list-count">2</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/sso/">sso</a><span class="sidebar-module-list-count">1</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/tars/">tars</a><span class="sidebar-module-list-count">1</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/tavern/">tavern</a><span class="sidebar-module-list-count">1</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/travis/">travis</a><span class="sidebar-module-list-count">1</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/uml/">uml</a><span class="sidebar-module-list-count">1</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/wcgi/">wcgi</a><span class="sidebar-module-list-count">1</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/xss/">xss</a><span class="sidebar-module-list-count">1</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/一致性hash/">一致性hash</a><span class="sidebar-module-list-count">1</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/持续集成/">持续集成</a><span class="sidebar-module-list-count">6</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/盗链/">盗链</a><span class="sidebar-module-list-count">1</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/签名/">签名</a><span class="sidebar-module-list-count">2</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/tags/证书/">证书</a><span class="sidebar-module-list-count">2</span></li></ul>
  </div>



  
  <div class="sidebar-module">
    <h4>Tag Cloud</h4>
    <p class="tagcloud">
      <a href="/tags/ansible/" style="font-size: 10px;">ansible</a> <a href="/tags/antd/" style="font-size: 10px;">antd</a> <a href="/tags/cookie/" style="font-size: 11.67px;">cookie</a> <a href="/tags/cors/" style="font-size: 10px;">cors</a> <a href="/tags/crsf/" style="font-size: 10px;">crsf</a> <a href="/tags/docker/" style="font-size: 13.33px;">docker</a> <a href="/tags/drone/" style="font-size: 16.67px;">drone</a> <a href="/tags/elasticsearch/" style="font-size: 10px;">elasticsearch</a> <a href="/tags/flask/" style="font-size: 11.67px;">flask</a> <a href="/tags/git/" style="font-size: 11.67px;">git</a> <a href="/tags/github/" style="font-size: 10px;">github</a> <a href="/tags/gitlab/" style="font-size: 11.67px;">gitlab</a> <a href="/tags/golang/" style="font-size: 20px;">golang</a> <a href="/tags/gorm/" style="font-size: 10px;">gorm</a> <a href="/tags/grpc/" style="font-size: 10px;">grpc</a> <a href="/tags/hexo/" style="font-size: 10px;">hexo</a> <a href="/tags/influxdb/" style="font-size: 10px;">influxdb</a> <a href="/tags/jsonp/" style="font-size: 10px;">jsonp</a> <a href="/tags/jsonschema/" style="font-size: 10px;">jsonschema</a> <a href="/tags/kibana/" style="font-size: 10px;">kibana</a> <a href="/tags/martini/" style="font-size: 10px;">martini</a> <a href="/tags/nginx/" style="font-size: 15px;">nginx</a> <a href="/tags/ngrok/" style="font-size: 11.67px;">ngrok</a> <a href="/tags/node/" style="font-size: 10px;">node</a> <a href="/tags/openldap/" style="font-size: 13.33px;">openldap</a> <a href="/tags/pip/" style="font-size: 10px;">pip</a> <a href="/tags/proxy/" style="font-size: 13.33px;">proxy</a> <a href="/tags/python/" style="font-size: 11.67px;">python</a> <a href="/tags/redis/" style="font-size: 10px;">redis</a> <a href="/tags/sentry/" style="font-size: 11.67px;">sentry</a> <a href="/tags/sqlalchemy/" style="font-size: 10px;">sqlalchemy</a> <a href="/tags/ssh/" style="font-size: 11.67px;">ssh</a> <a href="/tags/sso/" style="font-size: 10px;">sso</a> <a href="/tags/tars/" style="font-size: 10px;">tars</a> <a href="/tags/tavern/" style="font-size: 10px;">tavern</a> <a href="/tags/travis/" style="font-size: 10px;">travis</a> <a href="/tags/uml/" style="font-size: 10px;">uml</a> <a href="/tags/wcgi/" style="font-size: 10px;">wcgi</a> <a href="/tags/xss/" style="font-size: 10px;">xss</a> <a href="/tags/一致性hash/" style="font-size: 10px;">一致性hash</a> <a href="/tags/持续集成/" style="font-size: 18.33px;">持续集成</a> <a href="/tags/盗链/" style="font-size: 10px;">盗链</a> <a href="/tags/签名/" style="font-size: 11.67px;">签名</a> <a href="/tags/证书/" style="font-size: 11.67px;">证书</a>
    </p>
  </div>


  
  <div class="sidebar-module">
    <h4>Archives</h4>
    <ul class="sidebar-module-list"><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/archives/2020/08/">八月 2020</a><span class="sidebar-module-list-count">1</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/archives/2020/06/">六月 2020</a><span class="sidebar-module-list-count">1</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/archives/2020/03/">三月 2020</a><span class="sidebar-module-list-count">2</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/archives/2020/02/">二月 2020</a><span class="sidebar-module-list-count">4</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/archives/2020/01/">一月 2020</a><span class="sidebar-module-list-count">6</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/archives/2018/07/">七月 2018</a><span class="sidebar-module-list-count">2</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/archives/2018/06/">六月 2018</a><span class="sidebar-module-list-count">1</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/archives/2018/05/">五月 2018</a><span class="sidebar-module-list-count">3</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/archives/2017/12/">十二月 2017</a><span class="sidebar-module-list-count">5</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/archives/2017/10/">十月 2017</a><span class="sidebar-module-list-count">2</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/archives/2017/08/">八月 2017</a><span class="sidebar-module-list-count">2</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/archives/2017/07/">七月 2017</a><span class="sidebar-module-list-count">8</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/archives/2017/06/">六月 2017</a><span class="sidebar-module-list-count">7</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/archives/2017/04/">四月 2017</a><span class="sidebar-module-list-count">4</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/archives/2017/03/">三月 2017</a><span class="sidebar-module-list-count">10</span></li><li class="sidebar-module-list-item"><a class="sidebar-module-list-link" href="/archives/2017/02/">二月 2017</a><span class="sidebar-module-list-count">10</span></li></ul>
  </div>



  
  <div class="sidebar-module">
    <h4>Recents</h4>
    <ul class="sidebar-module-list">
      
        <li>
          <a href="/2020/08/01/gitlab-sentry/">gitlab/sentry集成</a>
        </li>
      
        <li>
          <a href="/2020/06/10/ansible/">Ansible实践</a>
        </li>
      
        <li>
          <a href="/2020/03/08/elasticsearch_basic/">ElasticSearch学习笔记</a>
        </li>
      
        <li>
          <a href="/2020/02/29/jaeger_basic/">Jaeger初探</a>
        </li>
      
        <li>
          <a href="/2020/02/20/tavern/">ResfulApi测试框架tavern</a>
        </li>
      
    </ul>
  </div>



        </div>
    </div>
  </div>
  <footer class="blog-footer">
  <div class="container">
    <div id="footer-info" class="inner">
      &copy; 2020 KingQiu<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
      <br/>
      CopyRight © 2019 <a href="http://beian.miit.gov.cn/" target="_blank">粤ICP备19068003号</a>
    </div>
  </div>
</footer>
<script>
(function(){
    var bp = document.createElement('script');
    bp.src = '//push.zhanzhang.baidu.com/push.js';
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(bp, s);
})();
</script>

  
<script>
  var disqus_shortname = 'blog-qiujinwu-com';
  
  var disqus_url = 'http://blog.kimq.cn/2018/05/23/build-time-secrets-with-docker-containers/';
  
  (function(){
    var dsq = document.createElement('script');
    dsq.type = 'text/javascript';
    dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
</script>


<script src="http://cdn.bootcss.com/jquery/2.1.4/jquery.min.js" crossorigin="anonymous"></script>

<script src="http://cdn.bootcss.com/bootstrap/3.3.6/js/bootstrap.min.js" crossorigin="anonymous"></script>



<script src="/js/script.js"></script>

</body>
</html>
